# A2A Server Environment Configuration
# Copy this file to .env and adjust values as needed

# Server Configuration
A2A_HOST=0.0.0.0
A2A_PORT=8000
A2A_LOG_LEVEL=INFO

# Database Configuration (PostgreSQL required - no SQLite fallback in production)
# IMPORTANT: Dev and prod use SEPARATE databases to ensure isolation
#   - Development: a2a_server_dev (for local `make dev`)
#   - Production:  a2a_server
# Run migrations: python scripts/migrate.py --dev (or --prod)
DATABASE_URL=postgresql://postgres:password@localhost:5432/a2a_server_dev

# Message Broker Configuration
A2A_REDIS_URL=redis://localhost:6379

# Authentication Configuration
A2A_AUTH_ENABLED=false
# Format: name1:token1,name2:token2
A2A_AUTH_TOKENS=agent1:secret123,agent2:secret456

# Keycloak OIDC Authentication (for user sessions)
KEYCLOAK_URL=https://auth.quantum-forge.io
KEYCLOAK_REALM=quantum-forge
KEYCLOAK_CLIENT_ID=a2a-monitor
KEYCLOAK_CLIENT_SECRET=your-client-secret-here

# (Optional) Keycloak admin credentials (used only for provisioning scripts)
KEYCLOAK_ADMIN_USERNAME=admin
KEYCLOAK_ADMIN_PASSWORD=your-admin-password-here

# (Optional) Provisioning toggles used by scripts/keycloak_upsert_client.sh
# KEYCLOAK_PUBLIC_CLIENT=false
# KEYCLOAK_REDIRECT_URIS=http://127.0.0.1:8765/*,http://localhost:8765/*
# KEYCLOAK_WEB_ORIGINS=http://127.0.0.1:8765,http://localhost:8765

# (Optional) Used by scripts/test_api_keycloak_session.py
# Must be registered as a valid redirect URI on the Keycloak client.
KEYCLOAK_REDIRECT_URI=http://127.0.0.1:8765/callback

# OpenCode Configuration
# Host where OpenCode API is running (for container->host communication)
# Use 'localhost' for local development
# Use 'host.docker.internal' for Docker Desktop (Mac/Windows)
# Use actual host IP for Docker on Linux
OPENCODE_HOST=localhost
OPENCODE_PORT=9777

# OpenCode model provider credentials
# If your OpenCode config uses Anthropic (including Azure AI Foundry Anthropic endpoints), you must provide:
ANTHROPIC_API_KEY=your-anthropic-api-key-here

# Agent Configuration
A2A_AGENT_NAME=A2A Echo Agent
A2A_AGENT_DESCRIPTION=An A2A agent that echoes messages
A2A_AGENT_ORG=A2A Server MCP
A2A_AGENT_ORG_URL=https://github.com/rileyseaburg/A2A-Server-MCP

# SendGrid Email Configuration (for task completion reports)
# Get your API key from https://app.sendgrid.com/settings/api_keys
SENDGRID_API_KEY=SG.your-api-key-here
# Must be a verified sender in your SendGrid account
# See: https://app.sendgrid.com/settings/sender_auth
SENDGRID_FROM_EMAIL=noreply@yourdomain.com

# Email Reply Configuration (allows users to reply to task emails)
# Domain for receiving email replies via SendGrid Inbound Parse
# Set up MX record: inbound.yourdomain.com -> mx.sendgrid.net
EMAIL_INBOUND_DOMAIN=inbound.codetether.run
EMAIL_REPLY_PREFIX=task

# Stripe Configuration (for billing/subscriptions)
# Get your keys from https://dashboard.stripe.com/apikeys
# Use Test keys for development, Live keys for production
STRIPE_API_KEY=sk_test_your-stripe-secret-key
# Webhook secret from Stripe Dashboard -> Developers -> Webhooks -> Endpoint -> Signing secret
STRIPE_WEBHOOK_SECRET=whsec_your-webhook-signing-secret

# JWT Configuration (for self-service user auth)
# Generate with: python -c "import secrets; print(secrets.token_urlsafe(32))"
JWT_SECRET=your-jwt-secret-here
JWT_EXPIRATION_HOURS=24
CODETETHER_WEBHOOK_SECRET=your_webhook_secret_here
CREATIFY_API_KEY=your_api_id:your_api_key
