---
title: "SDK Reference"
description: "Integrate CodeTether into your applications"
---

## Overview

The CodeTether SDK allows you to programmatically interact with the CodeTether platform and agents. Available in TypeScript/JavaScript and Rust.

## TypeScript SDK

### Installation

```bash
npm install @codetether/sdk
# or
bun add @codetether/sdk
```

### Quick Start

```typescript
import { CodeTether } from "@codetether/sdk";

const client = new CodeTether({
  server: "https://api.codetether.run",
  token: process.env.CODETETHER_TOKEN,
});

// Send a task to an agent
const task = await client.tasks.send({
  message: {
    role: "user",
    content: "Implement a binary search function in Rust",
  },
});

// Wait for completion
const result = await client.tasks.wait(task.id);
console.log(result.artifacts);
```

### A2A Client

```typescript
import { A2AClient } from "@codetether/sdk";

const a2a = new A2AClient("https://api.codetether.run");

// Send message with streaming
const stream = a2a.sendMessageStream({
  role: "user",
  content: "Fix the bug in src/parser.rs",
});

for await (const update of stream) {
  console.log(update.status);
}
```

### Type Definitions

```typescript
interface Task {
  id: string;
  state: "submitted" | "working" | "completed" | "failed" | "cancelled";
  message: Message;
  artifacts?: Artifact[];
  error?: TaskError;
}

interface Message {
  role: "user" | "assistant";
  content: string;
  parts?: Part[];
}

interface Artifact {
  type: "text" | "code" | "file";
  path?: string;
  content: string;
}
```

## Rust SDK

### Installation

Add to `Cargo.toml`:

```toml
[dependencies]
codetether = "0.1"
```

### Quick Start

```rust
use codetether::{Client, Message};

#[tokio::main]
async fn main() -> Result<(), Box<dyn std::error::Error>> {
    let client = Client::new("https://api.codetether.run")
        .with_token(std::env::var("CODETETHER_TOKEN")?);

    let task = client
        .tasks()
        .send(Message::user("Implement a parser"))
        .await?;

    let result = client.tasks().wait(&task.id).await?;
    println!("{:?}", result.artifacts);
    
    Ok(())
}
```

### A2A Protocol

```rust
use codetether::a2a::{A2AClient, Message};

let client = A2AClient::new("https://api.codetether.run");

// Get agent capabilities
let agent = client.get_agent_card().await?;
println!("Agent: {} v{}", agent.name, agent.version);

// Send streaming message
let mut stream = client.send_message_stream(
    Message::user("Review this code")
).await?;

while let Some(update) = stream.next().await {
    match update {
        Ok(event) => println!("{:?}", event),
        Err(e) => eprintln!("Error: {}", e),
    }
}
```

## REST API

### Base URL

```
https://api.codetether.run
```

### Authentication

```bash
curl -H "Authorization: Bearer $TOKEN" https://api.codetether.run/tasks
```

### Endpoints

#### Submit Task

```bash
POST /
Content-Type: application/json

{
  "jsonrpc": "2.0",
  "method": "message/send",
  "params": {
    "message": {
      "role": "user",
      "parts": [{"type": "text", "text": "Your request here"}]
    }
  },
  "id": "1"
}
```

#### Get Task Status

```bash
POST /
Content-Type: application/json

{
  "jsonrpc": "2.0",
  "method": "tasks/get",
  "params": {
    "id": "task-123"
  },
  "id": "2"
}
```

#### Stream Task

```bash
POST /
Content-Type: application/json

{
  "jsonrpc": "2.0",
  "method": "message/stream",
  "params": {
    "message": {
      "role": "user",
      "parts": [{"type": "text", "text": "Your request here"}]
    }
  },
  "id": "3"
}
```

Returns SSE stream with task updates.

## WebSocket API

```javascript
const ws = new WebSocket("wss://api.codetether.run/ws");

ws.onopen = () => {
  ws.send(JSON.stringify({
    jsonrpc: "2.0",
    method: "message/send",
    params: { message: { role: "user", content: "Hello" } },
    id: "1"
  }));
};

ws.onmessage = (event) => {
  const data = JSON.parse(event.data);
  console.log(data);
};
```

## Examples

### GitHub Integration

```typescript
import { CodeTether } from "@codetether/sdk";

const ct = new CodeTether({ server: "https://api.codetether.run" });

// Review a PR
const review = await ct.tasks.send({
  message: {
    role: "user",
    content: `Review PR #${prNumber} on ${repo}`,
    context: { github_token: process.env.GITHUB_TOKEN },
  },
});
```

### VS Code Extension

```typescript
import { CodeTether } from "@codetether/sdk";

export function activate(context: vscode.ExtensionContext) {
  const client = new CodeTether({
    server: vscode.workspace.getConfiguration("codetether").get("server"),
  });

  vscode.commands.registerCommand("codetether.ask", async () => {
    const question = await vscode.window.showInputBox();
    const result = await client.tasks.send({ message: { role: "user", content: question } });
    // Display result...
  });
}
```

## Rate Limits

| Tier | Requests/min | Concurrent Tasks |
|------|-------------|------------------|
| Free | 10 | 1 |
| Pro | 100 | 10 |
| Team | 1000 | 50 |
| Enterprise | Unlimited | Unlimited |

## Error Codes

| Code | Description |
|------|-------------|
| `UNAUTHORIZED` | Invalid or expired token |
| `RATE_LIMITED` | Too many requests |
| `TASK_NOT_FOUND` | Task ID doesn't exist |
| `AGENT_UNAVAILABLE` | No workers available |
| `PROVIDER_ERROR` | AI provider error |
